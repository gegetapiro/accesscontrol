
<!DOCTYPE html>
<!-- Prova di aggiornamento su github -->
<!-- Prova di aggiornamento su github secondo -->
<!-- Prova di aggiornamento su github terzo -->
<html lang="🍝">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="style.css">
        <title>Document</title>
    </head>
    <body>

        <script>
           function insertnew(){
              var data =  $("#date").val();
              var entrata = $("#entry").val();
              var uscita = $("#exit").val();
              var greenpass = $("#greenpass").val();
              var nome = $("#name").val();
              var cognome = $("#surname").val();
              var azienda = $("#company").val();
              var motivazione = $("#goal").val();
              var referente = $("#referent").val();
              var targa = $("#countrynum").val();
              var note = $("#notes").val();
                // alert("va " + data + entrata + uscita);
            $.ajax({
                url: "insert.php",
                type: "POST",
                data: {
                    whichdata: data,
                    whenentry: entrata,
                    whenexit: uscita,
                    passgreen: greenpass,
                    whichname: nome,
                    whichsurname: cognome,
                    whichcompany: azienda,
                    whichgoal: motivazione,
                    whoreferent: referente,
                    whichcnumber: targa,
                    thenotes: note
                },
                success: function(response){
                    alert("qui il: " + response);
                }
            });

         }
            function editit(what){
                
            }
            function deleteit(what2){
                alert("quale id " + what2);
                $.ajax({
                  url: 'deleterecord.php',
                  type: 'POST',
                  data: {
                      wichid: what2
                  },
                  success: function(answer){
                      alert(answer);
                      location.reload(true);

                  }

                });
            }
       $.getJSON("showrecords.php", function(data){
        console.log(data);
        //    var visitors = [];
           $.each(data.visitatori, function(i, elem){

               var newRow = "<tr><td>" + elem.id + "</td><td>" + elem.datagiorno + "</td><td>" + 
               elem.ora_ingresso + "</td><td>" + elem.ora_uscita +  "</td><td>" + elem.covidControl + "</td><td>" + 
               elem.nome + "</td><td>" + elem.cognome + "</td><td>" + elem.company + "</td><td>" + elem.entryReasons +
               "</td><td>" + elem.referent + "</td><td>" + elem.licensePlate + "</td><td>" + elem.notes + 
               "</td><td><input type='button' value='MODIFICA' onclick='editit("+ elem.id +")' /></td>"+ 
               "<td><input type='button' value='CANCELLA' onclick='deleteit(" + elem.id + ")'></td></tr>";
               $(newRow).appendTo("#jsondata");
           });
       });
       
   </script>
        <div class="table-wrapper">
            <h1>Controllo accessi</h1>
            <table class="fl-table">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Data</th>
                        <th>Ingresso</th>
                        <th>Uscita</th>
                        <th>Greenpass</th>
                        <th>Nome</th>
                        <th>Cognome</th>
                        <th>Azienda</th>
                        <th>motivazione</th>
                        <th>Referente</th>
                        <th>Targa</th>
                        <th>Note</th>
                        <th>Modifica</th>
                        <th>Cancella</th>
                    </tr>

                </thead>
                <tbody id="jsondata">

                </tbody>
            </table>
        </div>
        <table>
            <!-- <thead>
                <tr>
                    <th>Data</th>
                    <th>Ingresso</th>
                    <th>Uscita</th>
                    <th>Greenpass</th>
                    <th>Nome</th>
                    <th>Cognome</th>
                    <th>Azienda</th>
                    <th>motivazione</th>
                    <th>Referente</th>
                    <th>Targa</th>
                    <th>Note</th>
                    <th>INSERISCI</th>

                </tr>

            </thead> -->
            <tbody>
                <div class="inserttab">
                    <label for="date">DATA<input class="theinput" id="date"
                            type="text"></label><br /><br />
                    <label for="entry">ENTRATA</label><input id="entry"
                        type="text"><br /><br />
                    <label for="exit">USCITA</label><input id="exit"
                        type="text"><br /><br />
                    <label for="greenpass">GREENPASS</label><input
                        id="greenpass" type="text"><br /><br />
                    <label for="name">NOME</label><input id="name" type="text"><br
                        /><br />
                    <label for="surname">COGNOME</label><input id="surname"
                        type="text"><br /><br />
                    <label for="company">AZIENDA</label><input id="company"
                        type="text"><br /><br />
                    <label for="goal">MOTIVO</label><input id="goal"
                        type="text"><br /><br />
                    <label for="referent">REFERENTE</label><input id="referent"
                        type="text"><br /><br />
                    <label for="countrynum">TARGA</label><input id="countrynum"
                        type="text"><br /><br />
                    <label for="notes">NOTE</label><input id="notes"
                        type="text"><br /><br />
                    <input type="button" value="INVIA" id="sender" name="sender"
                        onclick="insertnew()" />
                </div>
            </tbody>
        </body>
    </html>
